<div class="suscripcion-container">
  <h2 class="titulo">SuscripciÃ³n</h2>
  
  <!-- InformaciÃ³n de suscripciÃ³n actual -->
  <div *ngIf="tieneSuscripcionActiva" class="suscripcion-actual">
    <div class="suscripcion-info">
      <h3>ğŸ‰ Â¡Tienes una suscripciÃ³n activa!</h3>
      <div class="suscripcion-details">
        <p><strong>Plan:</strong> {{ suscripcionActual?.nombre }}</p>
        <p><strong>Vence:</strong> {{ formatearFecha(suscripcionActual?.fechaVencimiento || '') }}</p>
        <p><strong>DÃ­as restantes:</strong> {{ diasRestantes }} dÃ­as</p>
      </div>
      <div class="suscripcion-actions">
        <button class="btn-renovar" (click)="renovarSuscripcion()">Renovar</button>
        <button class="btn-cancelar" (click)="cancelarSuscripcion()">Cancelar</button>
      </div>
    </div>
  </div>

  <!-- Mensaje para usuarios sin suscripciÃ³n -->
  <div *ngIf="!tieneSuscripcionActiva" class="sin-suscripcion">
    <p>ğŸ’¡ SuscrÃ­bete para disfrutar de mensajes ilimitados y todas las funciones premium</p>
  </div>

  <div class="planes">
    <!-- Free -->
    <div class="plan free">
      <h3>Free</h3>
      <p class="precio">s/0</p>
      <ul>
        <li>âœ… Subir 1 sola imagen</li>
        <li>âœ… 5 mensajes por chat</li>
        <li>âœ… Acceso bÃ¡sico</li>
      </ul>
      <button (click)="abrirModal('free')" [disabled]="tieneSuscripcionActiva">Activar</button>
    </div>

    <!-- Premium mensual -->
    <div class="plan premium-mes destacado">
      <div class="badge">Recomendado</div>
      <h3>Premium <span>/mes</span></h3>
      <p class="precio">s/10</p>
      <ul>
        <li>âœ… Mensajes ilimitados</li>
        <li>âœ… Subir imÃ¡genes ilimitadas</li>
        <li>âœ… ConversaciÃ³n sin lÃ­mite</li>
        <li>âœ… Promociones en tiendas favoritas</li>
      </ul>
      <button (click)="abrirModal('mensual')" [disabled]="tieneSuscripcionActiva">Suscribirse</button>
    </div>

    <!-- Premium anual -->
    <div class="plan premium-anual">
      <div class="badge">Mejor valor</div>
      <h3>Premium <span>/aÃ±o</span></h3>
      <p class="precio">s/100</p>
      <p class="ahorro">Â¡Ahorra s/20 al aÃ±o!</p>
      <ul>
        <li>âœ… Mensajes ilimitados</li>
        <li>âœ… Subir imÃ¡genes ilimitadas</li>
        <li>âœ… ConversaciÃ³n sin lÃ­mite</li>
        <li>âœ… Promociones en tiendas favoritas</li>
        <li>âœ… Soporte prioritario</li>
      </ul>
      <button (click)="abrirModal('anual')" [disabled]="tieneSuscripcionActiva">Suscribirse</button>
    </div>
  </div>

  <app-metodopago-component 
    *ngIf="modalAbierto" 
    [planSeleccionado]="planSeleccionado"
    (cerrar)="cerrarModal()">
  </app-metodopago-component>
</div>